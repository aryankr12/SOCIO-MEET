{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/itachi/Desktop/sociomeet/client/src/components/landing_comp/profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { userContext } from '../../App';\n\nconst Profile = () => {\n  _s();\n\n  const [mypics, setPics] = useState([]);\n  const {\n    state,\n    dispatch\n  } = useContext(userContext);\n  const [image, setImage] = useState(\"\"); //console.log(state)\n\n  useEffect(() => {\n    fetch('http://localhost:5000/mypost', {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      setPics(result.mypost);\n    });\n  }, []);\n  useEffect(() => {\n    if (image) {\n      const data = new FormData();\n      data.append(\"file\", image);\n      data.append(\"upload_preset\", \"sociomeet\");\n      data.append(\"cloud_name\", \"cloud-storage-813\");\n      fetch(\"https://api.cloudinary.com/v1_1/cloud-storage-813/image/upload\", {\n        method: \"post\",\n        body: data\n      }).then(res => res.json()).then(data => {\n        /*setUrl(data.url)\n        console.log(data)\n        localStorage.setItem(\"user\",JSON.stringify({...state,pic:data.url}))\n        dispatch({\n            type:\"UPDATEPIC\",\n            payload:data.url\n        })*/\n        fetch('http://localhost:5000/updatepic', {\n          method: \"put\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n          },\n          body: JSON.stringify({\n            pic: data.url\n          })\n        }).then(res => res.json()).then(result => {\n          console.log(result);\n          localStorage.setItem(\"user\", JSON.stringify({ ...state,\n            pic: result.pic\n          }));\n          dispatch({\n            type: \"UPDATEPIC\",\n            payload: result.pic\n          });\n        });\n        window.location.reload(); //needed to reload this coz  \n        // I am getting an error while \n        //update the profile image in material css \n        //something until then let it be coz after \n        //refreshing the page it works fine !!!!!!!!!\n        //and we know one rule in programming ..........\n        //if the code works never touch it I repeat Never!!!!!\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  }, [image]);\n\n  const updatepic = file => {\n    setImage(file);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"550px\",\n      margin: \"0px auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"20px 0px\",\n        borderBottom: \"1px solid grey\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-around\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: \"160px\",\n              height: \"160px\",\n              borderRadius: \"80px\"\n            },\n            src: state ? state.pic : \"loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: state ? state.name : \"loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: state ? state.email : \"loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              width: \"108%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [mypics.length, \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [state ? state.followers.length : \"loading\", \" followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [state ? state.following.length : \"loading\", \" following\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-field input-field\",\n        style: {\n          margin: \"44px 0px 10px -2px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn waves-effect waves-light #01579b light-blue darken-4 \",\n          style: {\n            margin: \"-47px 0px 7px 64px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"change pic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: e => updatepic(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery\",\n      children: mypics.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"item\",\n          src: item.photo,\n          alt: item.title\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Profile, \"LrFleTz9sdbQapoIPGyZZHB7xIw=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/itachi/Desktop/sociomeet/client/src/components/landing_comp/profile.js"],"names":["React","useEffect","useState","useContext","userContext","Profile","mypics","setPics","state","dispatch","image","setImage","fetch","headers","localStorage","getItem","then","res","json","result","mypost","data","FormData","append","method","body","JSON","stringify","pic","url","console","log","setItem","type","payload","window","location","reload","catch","e","updatepic","file","maxWidth","margin","borderBottom","display","justifyContent","width","height","borderRadius","name","email","length","followers","following","target","files","map","item","photo","title","_id"],"mappings":"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","sourcesContent":["import React,{useEffect,useState,useContext} from 'react'\nimport {userContext} from '../../App'\n\nconst Profile =()=>{\n\n    const [mypics,setPics] = useState([])\n    const {state,dispatch} = useContext(userContext)\n    const [image,setImage] = useState(\"\")\n    //console.log(state)\n    useEffect(()=>{\n        fetch('http://localhost:5000/mypost',{\n            headers:{\"Authorization\": \"Bearer \"+localStorage.getItem(\"jwt\")\n        }\n        }).then(res=>res.json())\n        .then(result=>{\n            setPics(result.mypost)\n        })\n    },[])\n    useEffect(()=>{\n        if(image){\n        const data =new FormData()\n        data.append(\"file\",image)\n        data.append(\"upload_preset\",\"sociomeet\")\n        data.append(\"cloud_name\",\"cloud-storage-813\")\n\n        fetch(\"https://api.cloudinary.com/v1_1/cloud-storage-813/image/upload\",{\n            method:\"post\",\n            body:data\n        }).then(res=>res.json())\n        .then(data=>{\n            /*setUrl(data.url)\n            console.log(data)\n            localStorage.setItem(\"user\",JSON.stringify({...state,pic:data.url}))\n            dispatch({\n                type:\"UPDATEPIC\",\n                payload:data.url\n            })*/\n            fetch('http://localhost:5000/updatepic',{\n                method:\"put\",\n                headers:{\n                    \"Content-Type\"  : \"application/json\",\n                    \"Authorization\" : \"Bearer \"+localStorage.getItem(\"jwt\")\n                },\n                body:JSON.stringify({\n                    pic:data.url\n                })\n\n            }).then(res=>res.json())\n            .then(result=>{\n                console.log(result)\n                localStorage.setItem(\"user\",JSON.stringify({...state,pic:result.pic}))\n                dispatch({\n                    type:\"UPDATEPIC\",\n                    payload:result.pic\n                })\n            })\n            window.location.reload()//needed to reload this coz  \n                                    // I am getting an error while \n                                    //update the profile image in material css \n                                    //something until then let it be coz after \n                                    //refreshing the page it works fine !!!!!!!!!\n                                    //and we know one rule in programming ..........\n                                    //if the code works never touch it I repeat Never!!!!!\n        }).catch(e=>{\n            console.log(e)\n        })\n    }\n    },[image])\n\n    const  updatepic = (file)=>{\n        setImage(file)\n    }\n\n\n\n    return (\n        \n        <div style={{maxWidth:\"550px\",margin:\"0px auto\"}}>\n            <div style ={{\n                \n                margin: \"20px 0px\",\n                borderBottom:\"1px solid grey\"\n\n            }}>\n\n            \n            <div style ={{\n                display:\"flex\",\n                justifyContent:\"space-around\"\n\n            }}>\n                <div>\n                    <img style={{width:\"160px\",height:\"160px\",borderRadius:\"80px\"}}\n                src={state?state.pic:\"loading...\"}\n                    />\n                    \n                </div>\n                <div>\n                    <h4>{state?state.name:\"loading...\"}</h4>\n                    <h5>{state?state.email:\"loading...\"}</h5>\n                    <div style={{display:\"flex\",justifyContent:\"space-between\",width:\"108%\"}}>  \n                        <h6>{mypics.length} posts</h6>\n                        <h6>{state?state.followers.length:\"loading\"} followers</h6>\n                        <h6>{state?state.following.length:\"loading\"} following</h6>\n                    </div>\n                </div>\n            </div>\n            \n                <div className=\"file-field input-field\" style={{margin:\"44px 0px 10px -2px\"}}>\n                    <div className=\"btn waves-effect waves-light #01579b light-blue darken-4 \" style={{margin:\"-47px 0px 7px 64px\"}}>\n                    <span>change pic</span>\n                    <input \n                    type=\"file\" \n                    onChange={(e)=>updatepic(e.target.files[0])}\n                    />\n                </div>\n                </div>\n                </div>\n        <div className=\"gallery\">\n        {\n            mypics.map(item=>{\n            return(\n                <img key={item._id} className=\"item\" src = {item.photo} alt= {item.title} />\n            )\n            })\n        }\n        </div>\n        </div>\n    )\n}\n\nexport default Profile "]},"metadata":{},"sourceType":"module"}